(()=>{"use strict";var e,t,o,n,a={693:(e,t,o)=>{o.a(e,(async(e,t)=>{try{var n=o(522),a=o(200),r=o(904),l=(o(142),o(488)),i=o(954),c=o(41),s=o(87),d=e([n,a,r,i,c,s]);function p(){s.Z.applyClickEvents(),s.Z.toggleAddToMapButtons((0,c.K0)()),s.Z.toggleObjectListButton(),(0,c.uP)(),l.SX(),l.uU()}[n,a,r,i,c,s]=d.then?(await d)():d,document.addEventListener("DOMContentLoaded",p),t()}catch(u){t(u)}}))},87:(e,t,o)=>{o.a(e,(async(e,n)=>{try{o.d(t,{Z:()=>d});var a=o(41),r=o(954),l=o(190),i=o(990),c=o(488),s=e([a,r,l,i]);[a,r,l,i]=s.then?(await s)():s;const d=function(){let e=document.querySelector("#button-add-to-map"),t=document.querySelector("#button-clear-fields"),o=document.querySelector("#button-settings"),n=document.querySelector("#button-settings-reset"),s=document.querySelector("#button-objects-copy-all"),p=document.querySelector("#button-objects-zoom-all"),u=document.querySelector("#button-objects-delete-all");return{applyClickEvents:function(){e.addEventListener("click",(function(){let e,t,o=(0,a.K0)(),n=l.N.getValues(o);"point"===o?e=r.M.add({type:"point",coords:[{lat:n.lat,lon:n.lon}]}):"circle"===o?e=r.M.add({type:"circle",coords:[{lat:n.lat,lon:n.lon}],radius:n.rad}):"line"===o?e=r.M.add({type:"polyline",coords:[{lat:n.latOne,lon:n.lonOne},{lat:n.latTwo,lon:n.lonTwo}]}):"geojson"===o?e=r.M.add({type:"geojson",geoJson:n.geoJson}):"array"===o&&(t=r.M.addArray(n.arrayList)),"array"!==o?c.Aj.onAddObject.flyTo&&r.M.locateByObjectID(e):(t.payload.points+t.payload.circles+t.payload.polylines+t.payload.polygones+t.payload.rectangles+t.payload.SVGs+t.payload.GeoJSON+t.payload.cursorOnRoute>0&&c.Aj.onAddObject.flyTo&&r.M.showAll(),(0,a.M8)(t),a.E.close(),a.E.open())})),t.addEventListener("click",(function(){let e=(0,a.K0)();l.N.clearValues(e),d.toggleAddToMapButtons(e)})),o.addEventListener("click",(function(){(0,a.X5)()})),n.addEventListener("click",(function(){c.Ic.resetToDefault(),c.Aj.resetToDefault(),c.Ei(),(0,a.M8)({type:"fullReset",text:"<b>LocalStorage</b> is cleared and <b>Settings</b> was restored to their defaults!"}),a.E.close(),a.E.open(),c.uU()})),s.addEventListener("click",(function(){r.M.copyAllToClipboard()})),p.addEventListener("click",(function(){r.M.showAll()})),u.addEventListener("click",(function(){r.M.deleteAll()}))},updateObjectsManagementButtons:function(){let e=document.querySelectorAll(".button-object-info"),t=document.querySelectorAll(".button-object-copy"),o=document.querySelectorAll(".button-object-locate"),n=document.querySelectorAll(".button-object-delete");e.forEach((function(e){e.addEventListener("click",(function(){let e=r.M.getFullInfo(this),t=(0,i.yl)(e);(0,a.V)(t.title,t.content)}))})),t.forEach((function(e){e.addEventListener("click",(function(){r.M.copyToClipboardByNode(this)}))})),o.forEach((function(e){e.addEventListener("click",(function(){r.M.locateByNode(this)}))})),n.forEach((function(e){e.addEventListener("click",(function(){r.M.delete(this),d.toggleObjectListButton()}))}))},toggleAddToMapButtons:function(o){let n=l.N.validateValues(o);e.disabled=n.indexOf(0)>-1,t.disabled=n.indexOf(1)<=-1},toggleObjectListButton:function(){let e=document.querySelector("#objects-list");r.P.length>0?(s.disabled=!1,p.disabled=!1,u.disabled=!1,e.style.visibility="visible"):(s.disabled=!0,p.disabled=!0,u.disabled=!0,e.style.visibility="hidden")}}}();n()}catch(e){n(e)}}))},522:(e,t,o)=>{o.a(e,(async(e,n)=>{try{o.d(t,{U:()=>y});let a=JSON.parse(localStorage.getItem("lastClickedLatLon"))||await r()||[55.752318,37.619814];async function r(){try{const e=await fetch("http://ip-api.com/json/"),t=await e.json();if("number"==typeof t.lat&&"number"==typeof t.lon)return[t.lat,t.lon]}catch(e){console.log(e)}return null}let l=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}),i=L.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd"}),c=L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'}),s=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),d=L.tileLayer("https://tiles.stadiamaps.com/tiles/osm_bright/{z}/{x}/{y}{r}.png",{maxZoom:20,attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}),p=L.tileLayer("https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",{maxZoom:20,attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}),u=L.tileLayer("https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png",{attribution:'<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia</a>'}),m=L.tileLayer("https://a.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png",{attribution:"Рендеринг: OpenRailwayMap, Данные карты © участники OpenStreetMap"}),g=L.tileLayer("https://a.tiles.openrailwaymap.org/maxspeed/{z}/{x}/{y}.png",{attribution:"Рендеринг: OpenRailwayMap, Данные карты © участники OpenStreetMap"}),y=L.map("map",{center:a,minZoom:2,maxZoom:18,zoomSnap:1,zoom:6,layers:[l]});y.attributionControl.setPrefix("Leaflet");let h={OpenStreetMap:l,"CartoDB.Positron":c,"CartoDB.Voyager":i,"Esri.WorldImagery":s,"Stadia.OSMBright":d,"Stadia.AlidadeSmooth":p,Wikimedia:u},f={"OpenRailwayMap (infrastructure)":m,"OpenRailwayMap (maxspeeds)":g};L.control.layers(h,f,{position:"bottomright"}).addTo(y),L.control.scale().addTo(y),y.on("click",(e=>{localStorage.setItem("lastClickedLatLon",JSON.stringify([e.latlng.lat,e.latlng.lng]))})),n()}catch(b){n(b)}}),1)},56:(e,t,o)=>{o.a(e,(async(e,n)=>{try{o.d(t,{C2:()=>m,Td:()=>i,WH:()=>l,YQ:()=>s,__:()=>d,pM:()=>g,s$:()=>u,sC:()=>p,vQ:()=>c});var a=o(41),r=e([a]);a=(r.then?(await r)():r)[0];const l=(e,t)=>{let o={m:0,km:0},n=null;return e.forEach(((e,t)=>{let a=e[0],r=e[1];n&&(o.m+=L.latLng(n).distanceTo([a,r])),n=[a,r]})),o.km=Math.round(o.m/1e3*100)/100,o.m=Math.round(100*o.m)/100,t in o?o[t]:o},i=(e,t)=>{let o=e.length,n={m2:0,km2:0,ft2:0,mi2:0,ac:0},a=o-1;for(let t=0;t<o;t++){let o=111319.5*e[a][0],r=111319.5*e[t][0],l=e[a][1]*(40075e3*Math.cos(e[a][0]*Math.PI/180)/360),i=e[t][1]*(40075e3*Math.cos(e[t][0]*Math.PI/180)/360);n.m2=n.m2+(o+r)*(l-i),a=t}return n.m2=Math.round(100*Math.abs(n.m2/2))/100,n.km2=Math.round(n.m2/1e6*100)/100,n.ft2=Math.round(10.76391*n.m2*100)/100,n.mi2=Math.round(3.8610216e-7*n.m2*100)/100,n.ac=Math.round(24711e-8*n.m2*100)/100,t in n?n[t]:n},c=(e,t)=>{navigator.clipboard.writeText(e).then((function(){(0,a.M8)({type:"clipboardCopyResult",text:`JSON data of <b>${t}</b> copied to clipboard successfully!`}),a.E.close(),a.E.open()}),(function(){(0,a.M8)({type:"clipboardCopyResult",text:`JSON data of <b>${t}</b> copying to clipboard failed!`}),a.E.close(),a.E.open()}))},s=e=>{window.open(e,"_blank").focus()},d=e=>void 0===e?"—":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "),p=(e,t)=>{let o={m:parseFloat(e).toFixed(0),km:(parseFloat(e)/1e3).toFixed(2)};return t in o?o[t]:o},u=e=>!isNaN(e)&&""!==e&&Math.abs(e)<=90,m=e=>!isNaN(e)&&""!==e&&Math.abs(e)<=180,g=e=>{if(e.length<5||!e.startsWith("["))return!1;try{return JSON.parse(e)}catch(e){return!1}};n()}catch(e){n(e)}}))},990:(e,t,o)=>{o.a(e,(async(e,n)=>{try{o.d(t,{B8:()=>g,F9:()=>d,U6:()=>i,tX:()=>u,wl:()=>p,ww:()=>c,yD:()=>m,yl:()=>s});var a=o(56),r=e([a]);a=(r.then?(await r)():r)[0];let l='<button class="mdc-button button-object-info" title="Full info"><span class="mdc-button__ripple"></span><span class="mdi mdi-icon-button mdi-information-outline mdi-18px"></span></button><button class="mdc-button button-object-copy" title="Copy JSON to clipboard"><span class="mdc-button__ripple"></span><span class="mdi mdi-icon-button mdi-content-copy mdi-18px"></span></button><button class="mdc-button button-object-locate" title="Locate on the map"><span class="mdc-button__ripple"></span><span class="mdi mdi-icon-button mdi-crosshairs-gps mdi-18px"></span></button><button class="mdc-button button-object-delete"  title="Delete object"><span class="mdc-button__ripple"></span><span class="mdi mdi-icon-button mdi-delete-forever mdi-18px"></span></button>';function i(e,t){return`<div class='b-marker-icon-arrow' style='background-color: transparent; transform: rotate(${t}deg)'><?xml version="1.0" encoding="UTF-8"?><svg class="b-marker-icon-arrow__shadow" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24">\n<path stroke="white" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" fill="${e}" d="M12,2L4.5,20.29L5.21,21L12,18L18.79,21L19.5,20.29L12,2Z" />\n</svg></div>`}function c(e,t="simple"){return"simple"===t?`<div style='background-color: transparent;'><?xml version="1.0" encoding="UTF-8"?><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="6" cy="6" r="6" fill="white"/><circle cx="6" cy="6" r="4" fill="${e}"/></svg></div>`:"big"===t?`<div style='background-color: transparent;'><?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="8" cy="8" r="8" fill="white"/><circle cx="8" cy="8" r="7" fill="${e}"/><circle cx="8" cy="8" r="6" fill="white"/><circle cx="8" cy="8" r="4" fill="${e}"/></svg></div>`:void 0}function s(e){let t={title:'<i class="mdi mdi-information mdi-18px"></i> Object info',content:""};t.content+='<table class="b-obj-info-table"><tbody><tr>',t.content+=`<tr><td>ID</td><td><b class="b-obj-info-bold-mono">${e.id}</b></td></tr>`,t.content+=`<tr><td>Type</td><td><b class="b-obj-info-bold-mono">${e.type}</b></td></tr>`,t.content+=`<td>JSON</td><td><pre class="b-obj-info-pre">${JSON.stringify(e.object,void 0,2)}</pre></td></tr>`;let o=e.object.coords,n="";o&&o.forEach(((e,t)=>{n+=`${t+1}: <b class="b-obj-info-bold-mono">${e.lat} ${e.lon}</b><br>`})),t.content+=`<tr><td>Coordinates</td><td><pre class="b-obj-info-pre">${n}</td></pre></td></tr>`;let r={point:!1,circle:"radius",polyline:"distance",polygon:"area",rectangle:"area"},l="";for(const[t,o]of Object.entries(e.measurements))l+=`${a.__(o)} ${t.replace("2","<sup>2</sup>")}<br>`;return t.content+=`<tr><td>Measurements${r[e.type]?'<br><span class="b-obj-info-regular-sans">('+r[e.type]+")</span>":""}</td><td>${""!==l?l:"—"}</td></tr>`,e.azimuth&&(t.content+=`<tr><td>Azimuth</td><td>${e.azimuth}°</td></tr>`),t.content+=`<tr><td>Color</td><td><span class="b-obj-info-dot"  style="background-color:${e.color}"></span>${e.color}</td></tr>`,t.content+=`<tr><td>Line weight</td><td>${e.weight?e.weight+"px":"—"}</td></tr>`,t.content+=`<tr><td>Show marker dot</td><td>${e.show_marker_dot}</td></tr>`,t.content+=`<tr><td>Show marker pin</td><td>${e.show_marker_pin}</td></tr>`,t.content+="</tbody></table>",t}function d(e){let t="",o="—";return e.azimuth&&(o=e.azimuth+"°"),"polyline"!==e.type&&"circle"!==e.type||(t=e.measurements.m>1e4?`${a.__(e.measurements.km)} km`:`${a.__(e.measurements.m)} m`),"polygon"!==e.type&&"rectangle"!==e.type||(t=e.measurements.m2>1e4?`${a.__(e.measurements.km2)} km<sup>2</sup>`:`${a.__(e.measurements.m2)} m<sup>2</sup>`),"—"!==o?o+=", "+t:o=t,`<tr><td>${e.id}</td><td>${e.type}</td><td>${o}</td><td>${l}</td></tr>`}function p(e,t,o=1,n=1,r,l,i){let c="";if(i)for(const[e,t]of Object.entries(i))c+=`${a.__(t)} ${e}<br>`;else c="—";return`<div class="popup-row"><div class="popup-col-1">ID:</div><div class="popup-col-2">${e}</div></div><div class="popup-row"><div class="popup-col-1">Type:</div><div class="popup-col-2">${t}</div></div><div class="popup-row"><div class="popup-col-1">Points:</div><div class="popup-col-2">${o} / ${n}</div></div><div class="popup-row"><div class="popup-col-1">Lat, Lon:</div><div class="popup-col-2"><strong>${r}, ${l}</strong></div></div><div class="popup-row"><div class="popup-col-1">Meas’s.:</div><div class="popup-col-2">${c}</div></div>`}function u(e,t=[]){let o="";if(e)for(const[n,a]of Object.entries(e))(t.indexOf(n)>-1||0===t.length)&&(o+=`<div class="popup-row" style="justify-content: space-between"><div class="popup-col-1" style="min-width: unset">${n}</div><div class="popup-col-2">${a}</div></div>`);return o}function m(e,t){let o=a.sC(e),n={};return n=o.m<1e4?{value:o.m,unit:"m"}:{value:o.km,unit:"km"},`<strong>${a.__(n.value)} ${n.unit}</strong><span id="ruler-id-${t}" class="mdi mdi-icon-button mdi-delete-forever mdi-12px"></span>`}function g(e){return"point"===e?"<p>You can add point by holding down the <kbd>shift</kbd> key while left-clicking on the map.</p><p>Click once to add one point.</p>":"circle"===e?"<p>You can add circle by holding down the <kbd>shift</kbd> key while left-clicking on the map.</p><p>Click twice — first time to add center point and second for circle edge.</p>":"line"===e?"<p>You can add line, polyline or polygon by holding down the <kbd>shift</kbd> key while left-clicking on the map.</p><p>Click on any temp marker to finish. If you click first marker at last it will be polygon, otherwise it will be polyline.</p>":"geojson"===e?"<p>Standart GeoJSON.</p>":"array"===e?'<p>Array of objects: <code>[{obj_1}, {obj_2}, ..., {obj_n}]</code>. <a href="https://github.com/bazhanius/simple-geo-tool/#json-format">Learn more</a>.</p>':""}n()}catch(y){n(y)}}))},190:(e,t,o)=>{o.a(e,(async(e,n)=>{try{o.d(t,{N:()=>i});var a=o(56),r=o(87),l=e([a,r]);[a,r]=l.then?(await l)():l;const i=function(){let e=document.querySelector("#point-lat"),t=document.querySelector("#point-lon"),o=document.querySelector("#circle-lat"),n=document.querySelector("#circle-lon"),r=document.querySelector("#circle-radius"),l=document.querySelector("#line-lat-1"),c=document.querySelector("#line-lon-1"),s=document.querySelector("#line-lat-2"),d=document.querySelector("#line-lon-2"),p=document.querySelector("#geojson"),u=document.querySelector("#array-of-coordinates");return{getNodeList:function(a){return"point"===a?[e,t]:"circle"===a?[o,n,r]:"line"===a?[l,c,s,d]:"geojson"===a?[p]:"array"===a?[u]:[]},getValues:function(a){return"point"===a?{lat:e.value,lon:t.value}:"circle"===a?{lat:o.value,lon:n.value,rad:r.value}:"line"===a?{latOne:l.value,lonOne:c.value,latTwo:s.value,lonTwo:d.value}:"geojson"===a?{geoJson:p.value}:"array"===a?{arrayList:u.value}:{}},clearValues:function(a){"point"===a?(e.value="",t.value=""):"circle"===a?(o.value="",n.value="",r.value=""):"line"===a?(l.value="",c.value="",s.value="",d.value=""):"geojson"===a?p.value="":"array"===a&&(u.value="")},validateValues:function(e){if("point"===e){let e=[0,0,0],t=i.getValues("point");return a.s$(t.lat)?e[0]=1:e[0]=0,a.C2(t.lon)?e[1]=1:e[1]=0,t.lat||t.lon?e[2]=1:e[2]=0,e}if("circle"===e){let e=[0,0,0,0],t=i.getValues("circle");return a.s$(t.lat)?e[0]=1:e[0]=0,a.C2(t.lon)?e[1]=1:e[1]=0,t.rad&&!isNaN(t.rad)&&t.rad>0&&t.rad<=1e6?e[2]=1:e[2]=0,t.lat||t.lon||t.rad?e[3]=1:e[3]=0,e}if("line"===e){let e=[0,0,0,0,0],t=i.getValues("line");return a.s$(t.latOne)?e[0]=1:e[0]=0,a.C2(t.lonOne)?e[1]=1:e[1]=0,a.s$(t.latTwo)?e[2]=1:e[2]=0,a.C2(t.lonTwo)?e[3]=1:e[3]=0,t.latOne||t.lonOne||t.latTwo||t.lonTwo?e[4]=1:e[4]=0,e}if("geojson"===e){let e=[0];return i.getValues("geojson").geoJson?e[0]=1:e[0]=0,e}if("array"===e){let e=[0,0,0],t=i.getValues("array"),o=new RegExp(/^[0-9a-zёа-я\ \s*\#\(\)\.\,\-\[\]\{\}\"\:\+\;\/\=\\\_\-]*$/i);return t.arrayList&&o.test(t.arrayList)?e[0]=1:e[0]=0,t.arrayList?e[1]=1:e[1]=0,a.pM(t.arrayList)?e[2]=1:e[2]=0,e}return[]}}}();i.getNodeList("point").forEach((function(e){e.addEventListener("keyup",(function(){r.Z.toggleAddToMapButtons("point")}))})),i.getNodeList("circle").forEach((function(e){e.addEventListener("keyup",(function(){r.Z.toggleAddToMapButtons("circle")}))})),i.getNodeList("line").forEach((function(e){e.addEventListener("keyup",(function(){r.Z.toggleAddToMapButtons("line")}))})),i.getNodeList("geojson").forEach((function(e){e.addEventListener("keyup",(function(){r.Z.toggleAddToMapButtons("geojson")}))})),i.getNodeList("array").forEach((function(e){e.addEventListener("keyup",(function(){r.Z.toggleAddToMapButtons("array")}))})),n()}catch(e){n(e)}}))},954:(e,t,o)=>{o.a(e,(async(e,n)=>{try{o.d(t,{M:()=>y,P:()=>m});var a=o(488),r=o(142),l=o(56),i=o(522),c=o(990),s=o(87),d=o(731),p=e([l,i,c,s,d]);[l,i,c,s,d]=p.then?(await p)():p;let u=0,m=[],g=document.querySelector("#objects-list > tbody");const y={add:function(e){try{u++;let t,o=e.type,n=e.coords,p=e.flipCoords,h=e.stepDistance,f=e.stepInterval,b=e.followCursor,v=e.traversedColor||"unset",w=e.whiteBorder,k=e.smoothTransition,S=[],M=e.radius?e.radius:null,j="",O=e.color||a.Ic.color[o],x=e.weight>=0?e.weight:a.Ic.lineWeight[o],T=e.fill,E="boolean"==typeof e.showMarkerPin?e.showMarkerPin:a.Ic.markerPin[o],A="boolean"==typeof e.showMarkerDot?e.showMarkerDot:a.Ic.markerDot[o],_="boolean"==typeof e.dashedLine?e.dashedLine:a.Ic.lineDashed[o];_=_?`${x}, ${2.5*x}`:null;let N=e.azimuth,$={pin:L.divIcon({className:"b-marker-icon",html:`<div class='b-marker-icon-pin' style='background-color:${O}'></div><b class='b-marker-icon-pin__content'>${u}</b>`,iconSize:[30,42],iconAnchor:[15,42]}),dot:L.divIcon({className:"b-marker-icon",html:`<div class='b-marker-icon-dot' style='background-color:${O}'></div>`,iconSize:[4,4],iconAnchor:[5,5]}),arrow:L.divIcon({className:"b-marker-icon",html:(0,c.U6)(O,N),iconSize:[24,24],iconAnchor:[12,12]}),svgDot:L.divIcon({className:"b-marker-icon",html:(0,c.ww)(O,"simple"),iconSize:[12,12],iconAnchor:[7,7]})},P=e.svgDataURI?e.svgDataURI:null;if("point"===o){let e=n[0].lat,t=n[0].lon;S.push(L.marker([e,t],{id:u,points:[1,1],latLon:[e,t],icon:N>=0&&N<=360?$.arrow:$.dot}).bindPopup((0,c.wl)(u,"Point",1,1,e,t))),E&&S.push(L.marker([e,t],{id:u,points:[1,1],latLon:[e,t],icon:$.pin}).bindPopup((0,c.wl)(u,"Point",1,1,e,t))),a.Aj.onAddObject.reverseGeocode&&(0,r.D)(e,t)}if("circle"===o){j=l.sC(M);let e=n[0].lat,t=n[0].lon;S.push(L.circle([e,t],{radius:M,color:O,weight:x,dashArray:_})),A&&S.push(L.marker([e,t],{id:u,points:[1,1],latLon:[e,t],radius:M,icon:N>=0&&N<=360?$.arrow:$.dot}).bindPopup((0,c.wl)(u,"Circle",1,1,e,t,j))),E&&S.push(L.marker([e,t],{id:u,points:[1,1],latLon:[e,t],radius:M,icon:$.pin}).bindPopup((0,c.wl)(u,"Circle",1,1,e,t,j))),a.Aj.onAddObject.reverseGeocode&&(0,r.D)(e,t)}if("polyline"===o){let e=n.length,t=[];n.forEach(((o,n)=>{let l=o.lat,i=o.lon;t.push([l,i]),A&&S.push(L.marker([l,i],{id:u,points:[n+1,e],latLon:[l,i],icon:$.dot}).bindPopup((0,c.wl)(u,"Polyline",n+1,e,l,i))),E&&S.push(L.marker([l,i],{id:u,points:[n+1,e],latLon:[l,i],icon:$.pin}).bindPopup((0,c.wl)(u,"Polyline",n+1,e,l,i))),a.Aj.onAddObject.reverseGeocode&&(0,r.D)(l,i)})),j=l.WH(t),S.push(L.polyline(t,{color:O,weight:x,dashArray:_}))}if("polygon"===o){let e=n.length,t=[];n.forEach(((o,n)=>{let l=o.lat,i=o.lon;t.push([l,i]),A&&S.push(L.marker([l,i],{id:u,points:[n+1,e],latLon:[l,i],icon:$.dot}).bindPopup((0,c.wl)(u,"Polygon",n+1,e,l,i))),E&&S.push(L.marker([l,i],{id:u,points:[n+1,e],latLon:[l,i],icon:$.pin}).bindPopup((0,c.wl)(u,"Polygon",n+1,e,l,i))),a.Aj.onAddObject.reverseGeocode&&(0,r.D)(l,i)})),j=l.Td(t),S.push(L.polygon(t,{color:O,weight:x,dashArray:_}))}if("rectangle"===o){let e=[[n[0].lat,n[0].lon],[n[1].lat,n[1].lon]];e.forEach(((e,t)=>{let o=e[0],n=e[1];A&&S.push(L.marker([o,n],{id:u,points:[t+1,2],latLon:[o,n],icon:$.dot}).bindPopup((0,c.wl)(u,"Rectangle",t+1,2,o,n))),E&&S.push(L.marker([o,n],{id:u,points:[t+1,2],latLon:[o,n],icon:$.pin}).bindPopup((0,c.wl)(u,"Rectangle",t+1,2,o,n))),a.Aj.onAddObject.reverseGeocode&&(0,r.D)(o,n)})),j=l.Td([[n[0].lat,n[0].lon],[n[0].lat,n[1].lon],[n[1].lat,n[1].lon],[n[1].lat,n[0].lon]]),S.push(L.rectangle(e,{color:O,weight:x,dashArray:_}))}if("svgString"===o&&P){let e=[[n[0].lat,n[0].lon],[n[1].lat,n[1].lon]];const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("xmlns","http://www.w3.org/2000/svg");let o=atob(P.replace(/data:image\/svg\+xml;base64,/,"")).replace(/(\n+)/gm,"").replace(/stroke=\"(.*?)\"/g,`stroke="${O}" vector-effect="non-scaling-stroke"`).replace(/stroke\-width=\"(.*?)\"/g,`stroke-width="${x}"`).replace(/\ width=\"(.*?)\"/,' width="100%"').replace(/\ height=\"(.*?)\"/,' height="100%"');T&&(o=o.replace(/fill=\"(.*?)\"/g,`fill="${T}"`)),t.innerHTML=o,S.push(L.svgOverlay(t,e))}if("geojson"===o&&S.push(L.geoJSON(JSON.parse(e.geoJson),{color:O,weight:x,onEachFeature:function(e,t){let o=e.properties?.color||O;t.setStyle({fillColor:o,color:o,weight:e.properties?.weight||x})},pointToLayer:function(e,t){let o=[];return o.push(L.marker(t,{icon:L.divIcon({className:"b-marker-icon",html:(0,c.ww)(e.properties?.color||O,e.properties?.type||"simple"),iconSize:"simple"===e.properties?.type?[12,12]:[16,16],iconAnchor:"simple"===e.properties?.type?[7,7]:[9,9]})}).bindPopup((0,c.tX)(e.properties))),E&&o.push(L.marker(t,{icon:$.pin})),L.featureGroup(o)}})),"cursorOnRoute"===o){let e,t,o=u,a=(e,t)=>turf.bearingToAzimuth(turf.bearing(turf.point(e),turf.point(t)));if(p?(e=L.GeoJSON.coordsToLatLngs(n),t=n):(e=n,t=JSON.parse(JSON.stringify(n)).map((e=>[e[1],e[0]]))),k?document.documentElement.style.setProperty("--step-transition",`all ${f}s linear`):document.documentElement.style.setProperty("--step-transition","unset"),w){let t=L.polyline(e,{weight:x+2,color:"#fff",opacity:1}).addTo(i.U);S.push(t)}let r=L.polyline(e,{weight:x,color:v,opacity:1}).addTo(i.U);S.push(r);let l=L.polyline(e,{weight:x,color:O,opacity:1}).addTo(i.U);S.push(l);let s=L.marker(e[0],{zIndexOffset:2e3,icon:L.divIcon({className:"b-marker-icon",html:(0,c.U6)(O,a(t[0],t[1])),iconSize:[24,24],iconAnchor:[12,12]})}).addTo(i.U);S.push(s);let d=e.length,g=turf.length(turf.lineString(t),{units:"kilometers"}),y=e=>{let n=turf.along(turf.lineString(t),e,{units:"kilometers"}),r=turf.lineSplit(turf.lineString(t),turf.point(n.geometry.coordinates));return 1 in r.features?(n.properties.azimuth=a(r.features[1].geometry.coordinates[0],r.features[1].geometry.coordinates[1]),l.setLatLngs(L.GeoJSON.coordsToLatLngs(r.features[1].geometry.coordinates))):(n.properties.azimuth=a(t[d-2],t[d-1]),n.geometry.coordinates[0]===t[d-1][0]&&n.geometry.coordinates[1]===t[d-1][1]&&i.U.removeLayer(l)),s.setLatLng([n.geometry.coordinates[1],n.geometry.coordinates[0]]),s.setIcon(L.divIcon({className:"b-marker-icon",html:(0,c.U6)(O,n.properties.azimuth),iconSize:[24,24],iconAnchor:[12,12]})),b&&i.U.setView([n.geometry.coordinates[1],n.geometry.coordinates[0]],i.U.getZoom()),m.findIndex((e=>e.id===o))},M=0,j=setInterval((()=>{let e=y(M*h);(M*h>g||-1===e)&&(clearInterval(j),j=null),M+=1}),1e3*f)}t=new L.featureGroup(S).addTo(i.U);let C={id:u,type:o,object:e,leaflet_object:t,measurements:j,color:O,weight:x,dashedLine:_,show_marker_dot:A,show_marker_pin:E,azimuth:N};return m.push(C),g.innerHTML+=(0,c.F9)(C),s.Z.updateObjectsManagementButtons(),s.Z.toggleObjectListButton(),a.Aj.onAddObject.reverseGeocode&&(0,r.B)(u,m),d.O&&y.disableAllPopups(),u}catch(e){return u--,-1}},addArray:function(e){let t={type:"addArray",payload:{points:0,circles:0,polylines:0,polygones:0,rectangles:0,SVGs:0,GeoJSON:0,cursorOnRoute:0,skipped:0}};return JSON.parse(e).forEach(((e,o)=>{let n=e;if("group"===e.type&&["drawCircleBounds","drawRectangleBounds"].indexOf(e.function)>-1){let t=null,o=y.getBoundsByObjectIDs(e.objectIDs);-1!==o&&("drawCircleBounds"===e.function&&(t={type:"circle",radius:o.radius,coords:[{lat:o.center.lat,lon:o.center.lng}]}),"drawRectangleBounds"===e.function&&(t={type:"rectangle",coords:[{lat:o.southEast.lat,lon:o.southEast.lng},{lat:o.northWest.lat,lon:o.northWest.lng}]}),null!==t&&(e.color&&(t.color=e.color),e.weight>=0&&(t.weight=e.weight),!0===e.showMarkerDot?t.showMarkerDot=!0:!1===e.showMarkerDot&&(t.showMarkerDot=!1),!0===e.showMarkerPin?t.showMarkerPin=!0:!1===e.showMarkerPin&&(t.showMarkerPin=!1),n=t))}n.type&&["point","circle","polyline","polygon","rectangle","svgString","geojson","cursorOnRoute"].indexOf(n.type)>-1&&(n.coords||n.geoJson||n.route)&&y.add(n)>0?(n.coords&&("point"===n.type?t.payload.points+=1:"circle"===n.type?t.payload.circles+=1:"polyline"===n.type?t.payload.polylines+=1:"polygon"===n.type?t.payload.polygones+=1:"rectangle"===n.type?t.payload.rectangles+=1:"svgString"===n.type?t.payload.SVGs+=1:"geojson"===n.type?t.payload.GeoJSON+=1:"cursorOnRoute"===n.type&&(t.payload.cursorOnRoute+=1)),n.geoJson&&"geojson"===n.type&&(t.payload.GeoJSON+=1)):t.payload.skipped+=1})),t},delete:function(e){let t=e.parentNode.parentNode,o=parseInt(t.firstChild.textContent),n=m.findIndex((e=>e.id===o));m[n].leaflet_object.clearLayers(),m.splice(n,1),t.remove()},copyAllToClipboard:function(){let e=[];m.forEach((function(t){e.push(t.object)})),l.vQ(JSON.stringify(e),"all objects")},copyToClipboardByNode:function(e){let t=e.parentNode.parentNode,o=parseInt(t.firstChild.textContent),n=m.findIndex((e=>e.id===o));l.vQ("["+JSON.stringify(m[n].object)+"]",m[n].type)},locateByNode:function(e){let t=e.parentNode.parentNode,o=parseInt(t.firstChild.textContent),n=m.findIndex((e=>e.id===o));i.U.flyToBounds(m[n].leaflet_object.getBounds(),{padding:L.point(100,100)})},locateByObjectID:function(e){let t=m.findIndex((t=>t.id===e));"point"===m[t].type?i.U.flyToBounds(m[t].leaflet_object.getBounds(),{maxZoom:12}):i.U.flyToBounds(m[t].leaflet_object.getBounds(),{padding:L.point(100,100)})},getBoundsByObjectIDs:function(e){try{let t=[];e.forEach((function(e){let o=m.findIndex((t=>t.id===e));-1!==o&&t.push(m[o].leaflet_object)}));let o=new L.featureGroup(t),n=o.getBounds().getCenter(),a=o.getBounds().getNorthWest(),r=o.getBounds().getSouthEast(),l=o.getBounds().getNorthEast(),i=o.getBounds().getSouthWest(),c=L.latLng(l).distanceTo(a),s=L.latLng(r).distanceTo(i),d=L.latLng(l).distanceTo(r),p=L.latLng(a).distanceTo(i);return{center:n,radius:Math.max(c,s,d,p)/Math.sqrt(3),northWest:a,southEast:r}}catch(e){return console.log(e),-1}},deleteAll:function(){m.forEach((function(e){e.leaflet_object.clearLayers()})),m=[],g.innerHTML="",s.Z.toggleObjectListButton()},showAll:function(){let e=[];if(m.forEach((function(t){e.push(t.leaflet_object)})),e.length){let t=new L.featureGroup(e);i.U.flyToBounds(t.getBounds(),{padding:L.point(30,30)})}},disableAllPopups:function(){m.forEach((function(e){e.leaflet_object.eachLayer((function(e){e instanceof L.Marker&&e.off("click")}))}))},enableAllPopups:function(){m.forEach((function(e){e.leaflet_object.eachLayer((function(e){e instanceof L.Marker&&e.on("click",(function(){e.getPopup()&&e.openPopup()}))}))}))},getFullInfo:function(e){let t=e.parentNode.parentNode,o=parseInt(t.firstChild.textContent),n=m.findIndex((e=>e.id===o));return m[n]}};n()}catch(e){n(e)}}))},904:(e,t,o)=>{o.a(e,(async(e,n)=>{try{o.d(t,{u:()=>S});var a=o(522),r=o(41),l=o(954),i=o(56),c=o(87),s=e([a,r,l,i,c]);[a,r,l,i,c]=s.then?(await s)():s,document.querySelectorAll(".mdc-tab").forEach((function(e){e.addEventListener("click",(function(){let e=this.getAttribute("data-tab-name");c.Z.toggleAddToMapButtons(e),b=[],v.clearLayers(),m&&(m.remove(),m=void 0),g&&(g.remove(),g=void 0),p&&(p.remove(),p=void 0),u&&(u.remove(),u=void 0)}))}));const d=L.Control.extend({onAdd:e=>{const t=L.DomUtil.create("div");return t.innerHTML='<div class="mouse-cursor-helper"><p id="mouse-coordinates">0, 0</p><p id="temp-object-summary"></p><p id="zoom-level"></p>',t}});a.U.addControl(new d({position:"topright"}));let p,u,m,g,y=document.querySelector("#mouse-coordinates"),h=document.querySelector("#temp-object-summary"),f=document.querySelector("#zoom-level"),b=[],v=(new L.featureGroup).addTo(a.U),w=L.divIcon({className:"marker-icon-pin",html:"<div class='marker-pin marker-point-temp-color'></div><b>+</b>",iconSize:[30,42],iconAnchor:[15,42]}),k=L.divIcon({className:"marker-icon-dot marker-point-temp-color",iconSize:[4,4],iconAnchor:[3,3]}),S=!1;function M(e){S=e.shiftKey,S?L.DomUtil.addClass(a.U._container,"crosshair-cursor-enabled"):L.DomUtil.removeClass(a.U._container,"crosshair-cursor-enabled")}window.addEventListener("keydown",M,!1),window.addEventListener("keypress",M,!1),window.addEventListener("keyup",M,!1);const j=e=>{let t=b[0].lat===e[0]&&b[0].lon===e[1]&&b.length>2?"polygon":"polyline";l.M.add({type:t,coords:b}),v.clearLayers(),b=[],p.remove(),u.remove(),g.remove(),g=void 0};a.U.on("click",(function(e){if(S&&"array"!==r.mP){let t=(0,r.K0)();if(b.push({lat:parseFloat(e.latlng.lat).toFixed(6),lon:parseFloat(e.latlng.lng).toFixed(6)}),"point"===t&&S&&(l.M.add({type:"point",coords:b}),b=[]),"circle"===t&&S&&(1===b.length?(m=L.circle([b[0].lat,b[0].lon],{radius:0,weight:2,color:"#ff3",opacity:.8,fillOpacity:.1}).addTo(a.U),v.addLayer(L.marker([b[0].lat,b[0].lon],{icon:w})),v.addLayer(L.marker([b[0].lat,b[0].lon],{icon:k}))):b.length>=2&&(l.M.add({type:"circle",radius:parseFloat(L.latLng([b[0].lat,b[0].lon]).distanceTo([b[1].lat,b[1].lon])).toFixed(0),coords:b.splice(0,1)}),v.clearLayers(),b=[],m.remove())),"line"===t&&S){let e=b.length-1;g?g.setLatLngs(b):g=L.polyline(b,{color:"#ff3",weight:2,opacity:.6}).addTo(a.U),v.addLayer(L.marker([b[e].lat,b[e].lon],{icon:w}).on("click",(()=>{j([b[e].lat,b[e].lon])}))),v.addLayer(L.marker([b[e].lat,b[e].lon],{icon:k}).on("click",(t=>{j([b[e].lat,b[e].lon])}))),p?p.setLatLng([b[e].lat,b[e].lon]):p=L.marker([b[e].lat,b[e].lon],{icon:w}).addTo(a.U),u?u.setLatLng([b[e].lat,b[e].lon]):u=L.marker([b[e].lat,b[e].lon],{icon:k}).addTo(a.U)}}})),a.U.on("mousemove",(e=>{let t=parseFloat(e.latlng.lat).toFixed(6),o=parseFloat(e.latlng.lng).toFixed(6);if(!b[0]&&S&&g&&"array"!==r.mP&&(p.setLatLng([t,o]),u.setLatLng([t,o])),b[0]){let e=L.latLng([b[0].lat,b[0].lon]).distanceTo([t,o]).toFixed(0);y.innerHTML=`<span class="mdi mdi-map-marker mdi-12px"></span> ${b[0].lat}, ${b[0].lon}`,h.innerHTML=`<span class="mdi mdi-crosshairs mdi-12px"></span> ${t}, ${o}`,h.innerHTML+=`<br>${i.__(e)} m`,m&&m.setRadius(e),g&&(p.setLatLng([t,o]),u.setLatLng([t,o]),g.setLatLngs(b.concat({lat:t,lon:o})))}else y.innerHTML=`<span class="mdi mdi-crosshairs mdi-12px"></span> ${t}, ${o}`,h.innerHTML=""})),a.U.on("zoomend",(function(e){f.innerHTML="Zoom: "+e.target._zoom})),n()}catch(O){n(O)}}))},41:(e,t,o)=>{o.a(e,(async(e,n)=>{try{o.d(t,{E:()=>c,Fx:()=>L,K0:()=>h,M8:()=>d,V:()=>S,X5:()=>j,mP:()=>g,uP:()=>f});var a=o(990),r=o(56),l=o(954),i=e([a,r,l]);[a,r,l]=i.then?(await i)():i,window.mdc.autoInit();let c=new mdc.snackbar.MDCSnackbar(document.getElementById("b-mdc-snackbar")),s=document.getElementById("b-mdc-snackbar-content");c.timeoutMs=7500;const d=e=>{if("addArray"===e.type){let t=JSON.parse(JSON.stringify(e.payload)),o="";for(let e in t)0!==t[e]&&"skipped"!==e||delete t[e];t=Object.keys(t);let n=t.length;n>0?(o+="Added",t.forEach(((t,a)=>{o+=a!==n-1?` <strong>${e.payload[t]}</strong> ${t},`:` <strong>${e.payload[t]}</strong> ${t}.`}))):o+="Noting to add.",o+=`<br>Skipped <strong>${e.payload.skipped}</strong> element(s).`,s.innerHTML=o}else s.innerHTML=e.text};let p=new mdc.tabBar.MDCTabBar(document.querySelector(".mdc-tab-bar")),u=document.querySelectorAll(".mdc-tab-content"),m=["point","circle","line","geojson","array"],g="point",y=document.getElementById("hint-about-tabs");p.listen("MDCTabBar:activated",(function(e){g=m[e.detail.index],document.querySelector(".mdc-tab-content--active").classList.remove("mdc-tab-content--active"),u[e.detail.index].classList.add("mdc-tab-content--active"),history.pushState("","","?tab="+g),y.innerHTML=(0,a.B8)(g)}));const h=()=>g,f=()=>{let e=new URLSearchParams(location.search),t=e.get("tab"),o=e.get("addArray");if("point"===t)p.activateTab(0),g="point";else if("circle"===t)p.activateTab(1),g="circle";else if("line"===t)p.activateTab(2),g="line";else if("geojson"===t)p.activateTab(3),g="geojson";else if("array"===t){if(p.activateTab(4),g="array",o&&(0,r.pM)(o)){let e=l.M.addArray(o);e.payload.points+e.payload.circles+e.payload.polylines+e.payload.polygones>0&&l.M.showAll(),d(e),c.close(),c.open()}}else history.pushState({},null,location.href.split("?")[0])},b=document.querySelector("#b-mdc-modal-window"),L=new mdc.dialog.MDCDialog(b);b.querySelector("#dialog-confirm").onclick=function(){(0,r.YQ)("https://yandex.com/support/common/browsers-settings/"),L.close()},b.querySelector("#dialog-cancel").onclick=function(){L.close()};const v=new mdc.dialog.MDCDialog(document.querySelector("#b-mdc-modal-window-object-info")),w=document.querySelector("#b-object-info-dialog-title"),k=document.querySelector("#b-object-info-dialog-content"),S=(e,t)=>{w.innerHTML=e,k.innerHTML=t,v.open()},M=new mdc.dialog.MDCDialog(document.querySelector("#b-mdc-modal-window-settings")),j=()=>M.open();n()}catch(e){n(e)}}))},142:(e,t,o)=>{o.d(t,{B:()=>l,D:()=>r});let n=[];function a(e,t,o){let n=[],a=null;function r(){let t=n.shift();t&&e.apply(t.context,t.arguments),0===n.length&&(clearInterval(a),a=null)}return function(){n.push({context:o||this,arguments:[].slice.call(arguments)}),a||(a=setInterval(r,t))}}let r=a((function(e,t){n.filter((t=>t.lat===e)).find((e=>e.lon===t))||fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${e}&lon=${t}`).then((function(e){return e.json()})).then((function(o){let a={lat:e,lon:t,address:o.display_name};n.push(a)}))}),1100),l=a((function(e,t){let o=t.findIndex((t=>t.id===e));o>=0&&t[o].leaflet_object.getLayers().filter((e=>e instanceof L.Marker)).forEach((e=>{let t=e.options.latLon[0],o=e.options.latLon[1],a=n.filter((e=>e.lat===t)).find((e=>e.lon===o)).address;if(a){let t=e.getPopup().getContent(),o=`<div class="popup-row"><div class="popup-col-1">Address:</div><div class="popup-col-2"><small>${a}</small></div></div>`;e.getPopup().setContent(t+o)}}))}),5500)},731:(e,t,o)=>{o.a(e,(async(e,n)=>{try{o.d(t,{O:()=>p});var a=o(522),r=o(954),l=o(904),i=o(990),c=e([a,r,l,i]);[a,r,l,i]=c.then?(await c)():c;const s=L.Control.extend({onAdd:e=>{const t=L.DomUtil.create("div");return L.DomEvent.disableClickPropagation(t),t.innerHTML='<div class="ruler-control"><div class="ruler-control-polyline mdi mdi-ruler mdi-18px" title="Ruler"></div></div>',t}});a.U.addControl(new s({position:"topleft"})),a.U.createPane("rulerLinesPane"),a.U.getPane("rulerLinesPane").style.zIndex=650,a.U.createPane("rulerMarkersPane"),a.U.getPane("rulerMarkersPane").style.zIndex=651;const d=document.querySelector(".ruler-control-polyline");let p=!1,u=(new L.featureGroup).addTo(a.U),m=[],g=null;const y=()=>{u.addLayer(L.polyline([],{className:"ruler-polyline-path-bg",pane:"rulerLinesPane"}).addTo(a.U)),u.addLayer(L.polyline([],{className:"ruler-polyline-path",pane:"rulerLinesPane"}).addTo(a.U))};y(),d.addEventListener("click",(function(){!1===p?(d.classList.add("ruler-control__active"),L.DomUtil.addClass(a.U._container,"crosshair-cursor-enabled"),p=!0,r.M.disableAllPopups()):(d.classList.remove("ruler-control__active"),L.DomUtil.removeClass(a.U._container,"crosshair-cursor-enabled"),p=!1,u.clearLayers(),y(),m=[],r.M.enableAllPopups())}));const h=e=>{let t=[];return e.eachLayer((function(e){e instanceof L.Marker&&t.push(e.getLatLng())})),[t]};function f(){u.eachLayer((function(e){e instanceof L.Marker&&e.closePopup()}))}function b(){w()}function v(){w(),S(g._leaflet_id)}const w=(e,t)=>{if(e&&t){let o=L.divIcon({className:"marker-icon-pin",html:"<div class='ruler-marker-pin'></div>",iconSize:[15,15],iconAnchor:[0,0]}),n=L.marker([e,t],{icon:o,draggable:!0,pane:"rulerMarkersPane"}).on("dragstart",f).on("drag",b).on("dragend",v).on("popupopen",(e=>{S(e.popup._source._leaflet_id)})).addTo(a.U);u.addLayer(n)}m=h(u),u.eachLayer((function(e){e instanceof L.Polyline&&e.setLatLngs(m)})),k()},k=()=>{let e=0,t=null;u.eachLayer((function(o){if(o instanceof L.Marker){let n=o.getLatLng();t&&(e+=t.distanceTo(n)),t=n;let r=(0,i.yD)(e,o._leaflet_id),l=o.getPopup();l?l.setContent(r):o.bindPopup(r,{className:"ruler-marker-pin-popup",offset:[0,-12],minWidth:20,closeButton:!1,autoClose:!1}).addTo(a.U),g=o}})),g&&g.openPopup()},S=e=>{let t=document.querySelector("#ruler-id-"+e);t&&t.addEventListener("click",(function(){u.removeLayer(e),w()}))};a.U.on("click",(function(e){p&&!l.u&&w(e.latlng.lat,e.latlng.lng)})),n()}catch(M){n(M)}}))},488:(e,t,o)=>{o.d(t,{Aj:()=>n,Ei:()=>d,Ic:()=>a,SX:()=>c,uU:()=>s});const n={onAddObject:{flyTo:!0,reverseGeocode:!1},resetToDefault:function(){this.onAddObject={flyTo:!0,reverseGeocode:!1}}},a={markerPin:{point:!0,circle:!0,polyline:!0,polygon:!0,rectangle:!0,geojson:!1},markerDot:{point:!0,circle:!0,polyline:!0,polygon:!0,rectangle:!0,geojson:!0},color:{point:"#6e14ef",circle:"#3388ff",polyline:"#ff3333",polygon:"#008000",rectangle:"#801900",geojson:"#000",cursorOnRoute:"#ff3333"},lineWeight:{point:null,circle:2,polyline:2,polygon:2,rectangle:2,geojson:3,cursorOnRoute:3},lineDashed:{point:null,circle:!1,polyline:!1,polygon:!1,rectangle:!1},resetToDefault:function(){this.markerPin={point:!0,circle:!0,polyline:!0,polygon:!0,rectangle:!0,geojson:!1},this.markerDot={point:!0,circle:!0,polyline:!0,polygon:!0,rectangle:!0,geojson:!0},this.color={point:"#6e14ef",circle:"#3388ff",polyline:"#ff3333",polygon:"#008000",rectangle:"#801900",geojson:"#000",cursorOnRoute:"#ff3333"},this.lineWeight={point:null,circle:2,polyline:2,polygon:2,rectangle:2,geojson:3,cursorOnRoute:3},this.lineDashed={point:null,circle:!1,polyline:!1,polygon:!1,rectangle:!1}}},r=document.querySelectorAll('[class^="b-map-setting-"]'),l=document.querySelectorAll('[class^="b-obj-setting-"]');function i(e){let t=null;return e.className.startsWith("b-obj-setting-")&&(t=e.className.replace("b-obj-setting-","").split("-")),e.className.startsWith("b-map-setting-")&&(t=e.className.replace("b-map-setting-","").split("-")),{parameter:t[0],type:t[1]}}function c(){let e=JSON.parse(localStorage.getItem("onAddObjectSettings")),t=JSON.parse(localStorage.getItem("markerPinSettings")),o=JSON.parse(localStorage.getItem("markerDotSettings")),r=JSON.parse(localStorage.getItem("colorSettings")),l=JSON.parse(localStorage.getItem("lineWeightSettings")),i=JSON.parse(localStorage.getItem("lineDashedSettings"));e&&(n.onAddObject=e),t&&(a.markerPin=t),o&&(a.markerDot=o),r&&(a.color=r),l&&(a.lineWeight=l),i&&(a.lineDashed=i)}function s(){r.forEach((e=>{let t=i(e);n[t.parameter][t.type]?e.checked=!0:e.checked=!1})),l.forEach((e=>{let t=i(e);t.parameter.startsWith("marker")||t.parameter.startsWith("lineDashed")?a[t.parameter][t.type]?e.checked=!0:e.checked=!1:e.value=a[t.parameter][t.type],"lineWeight"===t.parameter&&(e.parentNode.getElementsByTagName("label")[0].textContent=a[t.parameter][t.type]+"px")}))}function d(){localStorage.clear()}r.forEach((e=>{let t=i(e);e.addEventListener("change",(function(){n[t.parameter][t.type]=this.checked,localStorage.setItem(`${t.parameter}Settings`,JSON.stringify(n[t.parameter]))}))})),l.forEach((e=>{let t=i(e);e.addEventListener("change",(function(){let e=t.parameter.startsWith("marker")||t.parameter.startsWith("lineDashed")?this.checked:this.value;"lineWeight"===t.parameter&&(this.parentNode.getElementsByTagName("label")[0].textContent=e+"px"),a[t.parameter][t.type]=e,localStorage.setItem(`${t.parameter}Settings`,JSON.stringify(a[t.parameter]))}))}))},200:(e,t,o)=>{o.a(e,(async(e,t)=>{try{var n=o(522),a=o(954),r=o(41),l=e([n,a,r]);[n,a,r]=l.then?(await l)():l;const i=L.Control.extend({onAdd:e=>{const t=L.DomUtil.create("div");return L.DomEvent.disableClickPropagation(t),t.innerHTML='<div class="user-location-control"><span class="mdi mdi-near-me mdi-18px" title="My location"></span></div>',t}});n.U.addControl(new i({position:"topleft"}));const c=document.querySelector(".user-location-control"),s=c.getElementsByTagName("SPAN")[0];c.addEventListener("click",(function(){d()}));const d=()=>{s.classList.remove("mdi-near-me"),s.classList.add("mdi-loading","mdi-spin");let e=[];navigator.geolocation.getCurrentPosition((function(t){e=[t.coords.latitude,t.coords.longitude,t.coords.accuracy],n.U.setView([e[0],e[1]],10);let o=a.M.add({type:"circle",coords:[{lat:e[0],lon:e[1]}],radius:e[2]});a.M.locateByObjectID(o),s.classList.remove("mdi-loading","mdi-spin"),s.classList.add("mdi-near-me")}),(function(e){console.warn(`ERROR(${e.code}): ${e.message}`),s.classList.remove("mdi-loading","mdi-spin"),s.classList.add("mdi-near-me"),r.Fx.open()}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})};t()}catch(e){t(e)}}))}},r={};function l(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return a[e](o,o.exports,l),o.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},l.a=(a,r,l)=>{var i;l&&((i=[]).d=-1);var c,s,d,p=new Set,u=a.exports,m=new Promise(((e,t)=>{d=t,s=e}));m[t]=u,m[e]=e=>(i&&e(i),p.forEach(e),m.catch((e=>{}))),a.exports=m,r((a=>{var r;c=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[e])return a;if(a.then){var r=[];r.d=0,a.then((e=>{l[t]=e,n(r)}),(e=>{l[o]=e,n(r)}));var l={};return l[e]=e=>e(r),l}}var i={};return i[e]=e=>{},i[t]=a,i})))(a);var l=()=>c.map((e=>{if(e[o])throw e[o];return e[t]})),s=new Promise((t=>{(r=()=>t(l)).r=0;var o=e=>e!==i&&!p.has(e)&&(p.add(e),e&&!e.d&&(r.r++,e.push(r)));c.map((t=>t[e](o)))}));return r.r?s:l()}),(e=>(e?d(m[o]=e):s(u),n(i)))),i&&i.d<0&&(i.d=0)},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l(693)})();