(()=>{"use strict";let e=JSON.parse(localStorage.getItem("lastClickedLatLon"))||[55.752318,37.619814],t=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}),o=L.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd"}),n=L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'}),a=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),r=L.tileLayer("https://tiles.stadiamaps.com/tiles/osm_bright/{z}/{x}/{y}{r}.png",{maxZoom:20,attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}),l=L.tileLayer("https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",{maxZoom:20,attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}),i=L.tileLayer("https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png",{attribution:'<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia</a>'}),s=L.tileLayer("https://a.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png",{attribution:"Рендеринг: OpenRailwayMap, Данные карты © участники OpenStreetMap"}),c=L.tileLayer("https://a.tiles.openrailwaymap.org/maxspeed/{z}/{x}/{y}.png",{attribution:"Рендеринг: OpenRailwayMap, Данные карты © участники OpenStreetMap"}),d=L.map("map",{center:e,minZoom:2,maxZoom:18,zoomSnap:1,zoom:6,layers:[t]});d.attributionControl.setPrefix("Leaflet");let p={OpenStreetMap:t,"CartoDB.Positron":n,"CartoDB.Voyager":o,"Esri.WorldImagery":a,"Stadia.OSMBright":r,"Stadia.AlidadeSmooth":l,Wikimedia:i},u={"OpenRailwayMap (infrastructure)":s,"OpenRailwayMap (maxspeeds)":c};L.control.layers(p,u,{position:"bottomright"}).addTo(d),L.control.scale().addTo(d),d.on("click",(e=>{localStorage.setItem("lastClickedLatLon",JSON.stringify([e.latlng.lat,e.latlng.lng]))}));const m={onAddObject:{flyTo:!0,reverseGeocode:!1},resetToDefault:function(){this.onAddObject={flyTo:!0,reverseGeocode:!1}}},g={markerPin:{point:!0,circle:!0,polyline:!0,polygon:!0,rectangle:!0,geojson:!1},markerDot:{point:!0,circle:!0,polyline:!0,polygon:!0,rectangle:!0,geojson:!0},color:{point:"#6e14ef",circle:"#3388ff",polyline:"#ff3333",polygon:"#008000",rectangle:"#801900",geojson:"#000",cursorOnRoute:"#ff3333"},lineWeight:{point:null,circle:2,polyline:2,polygon:2,rectangle:2,geojson:3,cursorOnRoute:3},lineDashed:{point:null,circle:!1,polyline:!1,polygon:!1,rectangle:!1},resetToDefault:function(){this.markerPin={point:!0,circle:!0,polyline:!0,polygon:!0,rectangle:!0,geojson:!1},this.markerDot={point:!0,circle:!0,polyline:!0,polygon:!0,rectangle:!0,geojson:!0},this.color={point:"#6e14ef",circle:"#3388ff",polyline:"#ff3333",polygon:"#008000",rectangle:"#801900",geojson:"#000",cursorOnRoute:"#ff3333"},this.lineWeight={point:null,circle:2,polyline:2,polygon:2,rectangle:2,geojson:3,cursorOnRoute:3},this.lineDashed={point:null,circle:!1,polyline:!1,polygon:!1,rectangle:!1}}},y=document.querySelectorAll('[class^="b-map-setting-"]'),f=document.querySelectorAll('[class^="b-obj-setting-"]');function h(e){let t=null;return e.className.startsWith("b-obj-setting-")&&(t=e.className.replace("b-obj-setting-","").split("-")),e.className.startsWith("b-map-setting-")&&(t=e.className.replace("b-map-setting-","").split("-")),{parameter:t[0],type:t[1]}}function b(){y.forEach((e=>{let t=h(e);m[t.parameter][t.type]?e.checked=!0:e.checked=!1})),f.forEach((e=>{let t=h(e);t.parameter.startsWith("marker")||t.parameter.startsWith("lineDashed")?g[t.parameter][t.type]?e.checked=!0:e.checked=!1:e.value=g[t.parameter][t.type],"lineWeight"===t.parameter&&(e.parentNode.getElementsByTagName("label")[0].textContent=g[t.parameter][t.type]+"px")}))}y.forEach((e=>{let t=h(e);e.addEventListener("change",(function(){m[t.parameter][t.type]=this.checked,localStorage.setItem(`${t.parameter}Settings`,JSON.stringify(m[t.parameter]))}))})),f.forEach((e=>{let t=h(e);e.addEventListener("change",(function(){let e=t.parameter.startsWith("marker")||t.parameter.startsWith("lineDashed")?this.checked:this.value;"lineWeight"===t.parameter&&(this.parentNode.getElementsByTagName("label")[0].textContent=e+"px"),g[t.parameter][t.type]=e,localStorage.setItem(`${t.parameter}Settings`,JSON.stringify(g[t.parameter]))}))}));let v=[];function k(e,t,o){let n=[],a=null;function r(){let t=n.shift();t&&e.apply(t.context,t.arguments),0===n.length&&(clearInterval(a),a=null)}return function(){n.push({context:o||this,arguments:[].slice.call(arguments)}),a||(a=setInterval(r,t))}}let w=k((function(e,t){v.filter((t=>t.lat===e)).find((e=>e.lon===t))||fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${e}&lon=${t}`).then((function(e){return e.json()})).then((function(o){let n={lat:e,lon:t,address:o.display_name};v.push(n)}))}),1100),S=k((function(e,t){let o=t.findIndex((t=>t.id===e));o>=0&&t[o].leaflet_object.getLayers().filter((e=>e instanceof L.Marker)).forEach((e=>{let t=e.options.latLon[0],o=e.options.latLon[1],n=v.filter((e=>e.lat===t)).find((e=>e.lon===o)).address;if(n){let t=e.getPopup().getContent(),o=`<div class="popup-row"><div class="popup-col-1">Address:</div><div class="popup-col-2"><small>${n}</small></div></div>`;e.getPopup().setContent(t+o)}}))}),5500);function j(e,t){return`<div class='b-marker-icon-arrow' style='background-color: transparent; transform: rotate(${t}deg)'><?xml version="1.0" encoding="UTF-8"?><svg class="b-marker-icon-arrow__shadow" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="24" height="24" viewBox="0 0 24 24">\n<path stroke="white" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" fill="${e}" d="M12,2L4.5,20.29L5.21,21L12,18L18.79,21L19.5,20.29L12,2Z" />\n</svg></div>`}function O(e,t="simple"){return"simple"===t?`<div style='background-color: transparent;'><?xml version="1.0" encoding="UTF-8"?><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="6" cy="6" r="6" fill="white"/><circle cx="6" cy="6" r="4" fill="${e}"/></svg></div>`:"big"===t?`<div style='background-color: transparent;'><?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="8" cy="8" r="8" fill="white"/><circle cx="8" cy="8" r="7" fill="${e}"/><circle cx="8" cy="8" r="6" fill="white"/><circle cx="8" cy="8" r="4" fill="${e}"/></svg></div>`:void 0}function T(e,t,o=1,n=1,a,r,l){let i="";if(l)for(const[e,t]of Object.entries(l))i+=`${F(t)} ${e}<br>`;else i="—";return`<div class="popup-row"><div class="popup-col-1">ID:</div><div class="popup-col-2">${e}</div></div><div class="popup-row"><div class="popup-col-1">Type:</div><div class="popup-col-2">${t}</div></div><div class="popup-row"><div class="popup-col-1">Points:</div><div class="popup-col-2">${o} / ${n}</div></div><div class="popup-row"><div class="popup-col-1">Lat, Lon:</div><div class="popup-col-2"><strong>${a}, ${r}</strong></div></div><div class="popup-row"><div class="popup-col-1">Meas’s.:</div><div class="popup-col-2">${i}</div></div>`}window.mdc.autoInit();let M=new mdc.snackbar.MDCSnackbar(document.getElementById("b-mdc-snackbar")),x=document.getElementById("b-mdc-snackbar-content");M.timeoutMs=7500;const A=e=>{if("addArray"===e.type){let t=JSON.parse(JSON.stringify(e.payload)),o="";console.log(t);for(let e in t)0!==t[e]&&"skipped"!==e||delete t[e];t=Object.keys(t);let n=t.length;n>0?(o+="Added",t.forEach(((t,a)=>{o+=a!==n-1?` <strong>${e.payload[t]}</strong> ${t},`:` <strong>${e.payload[t]}</strong> ${t}.`}))):o+="Noting to add.",o+=`<br>Skipped <strong>${e.payload.skipped}</strong> element(s).`,console.log(t),x.innerHTML=o}else x.innerHTML=e.text};let N=new mdc.tabBar.MDCTabBar(document.querySelector(".mdc-tab-bar")),E=document.querySelectorAll(".mdc-tab-content"),$=["point","circle","line","geojson","array"],P="point",C=document.getElementById("hint-about-tabs");N.listen("MDCTabBar:activated",(function(e){var t;P=$[e.detail.index],document.querySelector(".mdc-tab-content--active").classList.remove("mdc-tab-content--active"),E[e.detail.index].classList.add("mdc-tab-content--active"),history.pushState("","","?tab="+P),C.innerHTML="point"===(t=P)?"<p>You can add point by holding down the <kbd>shift</kbd> key while left-clicking on the map.</p><p>Click once to add one point.</p>":"circle"===t?"<p>You can add circle by holding down the <kbd>shift</kbd> key while left-clicking on the map.</p><p>Click twice — first time to add center point and second for circle edge.</p>":"line"===t?"<p>You can add line, polyline or polygon by holding down the <kbd>shift</kbd> key while left-clicking on the map.</p><p>Click on any temp marker to finish. If you click first marker at last it will be polygon, otherwise it will be polyline.</p>":"geojson"===t?"<p>Standart GeoJSON.</p>":"array"===t?'<p>Array of objects: <code>[{obj_1}, {obj_2}, ..., {obj_n}]</code>. <a href="https://github.com/bazhanius/simple-geo-tool/#json-format">Learn more</a>.</p>':""}));const I=()=>P,B=document.querySelector("#b-mdc-modal-window"),_=new mdc.dialog.MDCDialog(B);B.querySelector("#dialog-confirm").onclick=function(){W("https://yandex.com/support/common/browsers-settings/"),_.close()},B.querySelector("#dialog-cancel").onclick=function(){_.close()};const D=new mdc.dialog.MDCDialog(document.querySelector("#b-mdc-modal-window-object-info")),q=document.querySelector("#b-object-info-dialog-title"),z=document.querySelector("#b-object-info-dialog-content"),J=new mdc.dialog.MDCDialog(document.querySelector("#b-mdc-modal-window-settings")),R=(e,t)=>{let o=e.length,n={m2:0,km2:0,ft2:0,mi2:0,ac:0},a=o-1;for(let t=0;t<o;t++){let o=111319.5*e[a][0],r=111319.5*e[t][0],l=e[a][1]*(40075e3*Math.cos(e[a][0]*Math.PI/180)/360),i=e[t][1]*(40075e3*Math.cos(e[t][0]*Math.PI/180)/360);n.m2=n.m2+(o+r)*(l-i),a=t}return n.m2=Math.round(100*Math.abs(n.m2/2))/100,n.km2=Math.round(n.m2/1e6*100)/100,n.ft2=Math.round(10.76391*n.m2*100)/100,n.mi2=Math.round(3.8610216e-7*n.m2*100)/100,n.ac=Math.round(24711e-8*n.m2*100)/100,t in n?n[t]:n},G=(e,t)=>{navigator.clipboard.writeText(e).then((function(){A({type:"clipboardCopyResult",text:`JSON data of <b>${t}</b> copied to clipboard successfully!`}),M.close(),M.open()}),(function(){A({type:"clipboardCopyResult",text:`JSON data of <b>${t}</b> copying to clipboard failed!`}),M.close(),M.open()}))},W=e=>{window.open(e,"_blank").focus()},F=e=>void 0===e?"—":e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "),H=(e,t)=>{let o={m:parseFloat(e).toFixed(0),km:(parseFloat(e)/1e3).toFixed(2)};return t in o?o[t]:o},U=e=>!isNaN(e)&&""!==e&&Math.abs(e)<=90,V=e=>!isNaN(e)&&""!==e&&Math.abs(e)<=180,Z=e=>{if(e.length<5||!e.startsWith("["))return!1;try{return JSON.parse(e)}catch(e){return!1}},Y=function(){let e=document.querySelector("#point-lat"),t=document.querySelector("#point-lon"),o=document.querySelector("#circle-lat"),n=document.querySelector("#circle-lon"),a=document.querySelector("#circle-radius"),r=document.querySelector("#line-lat-1"),l=document.querySelector("#line-lon-1"),i=document.querySelector("#line-lat-2"),s=document.querySelector("#line-lon-2"),c=document.querySelector("#geojson"),d=document.querySelector("#array-of-coordinates");return{getNodeList:function(p){return"point"===p?[e,t]:"circle"===p?[o,n,a]:"line"===p?[r,l,i,s]:"geojson"===p?[c]:"array"===p?[d]:[]},getValues:function(p){return"point"===p?{lat:e.value,lon:t.value}:"circle"===p?{lat:o.value,lon:n.value,rad:a.value}:"line"===p?{latOne:r.value,lonOne:l.value,latTwo:i.value,lonTwo:s.value}:"geojson"===p?{geoJson:c.value}:"array"===p?{arrayList:d.value}:{}},clearValues:function(p){"point"===p?(e.value="",t.value=""):"circle"===p?(o.value="",n.value="",a.value=""):"line"===p?(r.value="",l.value="",i.value="",s.value=""):"geojson"===p?c.value="":"array"===p&&(d.value="")},validateValues:function(e){if("point"===e){let e=[0,0,0],t=Y.getValues("point");return U(t.lat)?e[0]=1:e[0]=0,V(t.lon)?e[1]=1:e[1]=0,t.lat||t.lon?e[2]=1:e[2]=0,e}if("circle"===e){let e=[0,0,0,0],t=Y.getValues("circle");return U(t.lat)?e[0]=1:e[0]=0,V(t.lon)?e[1]=1:e[1]=0,t.rad&&!isNaN(t.rad)&&t.rad>0&&t.rad<=1e6?e[2]=1:e[2]=0,t.lat||t.lon||t.rad?e[3]=1:e[3]=0,e}if("line"===e){let e=[0,0,0,0,0],t=Y.getValues("line");return U(t.latOne)?e[0]=1:e[0]=0,V(t.lonOne)?e[1]=1:e[1]=0,U(t.latTwo)?e[2]=1:e[2]=0,V(t.lonTwo)?e[3]=1:e[3]=0,t.latOne||t.lonOne||t.latTwo||t.lonTwo?e[4]=1:e[4]=0,e}if("geojson"===e){let e=[0];return Y.getValues("geojson").geoJson?e[0]=1:e[0]=0,e}if("array"===e){let e=[0,0,0],t=Y.getValues("array"),o=new RegExp(/^[0-9a-zёа-я\ \s*\#\(\)\.\,\-\[\]\{\}\"\:\+\;\/\=\\\_\-]*$/i);return t.arrayList&&o.test(t.arrayList)?e[0]=1:e[0]=0,t.arrayList?e[1]=1:e[1]=0,Z(t.arrayList)?e[2]=1:e[2]=0,e}return[]}}}();Y.getNodeList("point").forEach((function(e){e.addEventListener("keyup",(function(){K.toggleAddToMapButtons("point")}))})),Y.getNodeList("circle").forEach((function(e){e.addEventListener("keyup",(function(){K.toggleAddToMapButtons("circle")}))})),Y.getNodeList("line").forEach((function(e){e.addEventListener("keyup",(function(){K.toggleAddToMapButtons("line")}))})),Y.getNodeList("geojson").forEach((function(e){e.addEventListener("keyup",(function(){K.toggleAddToMapButtons("geojson")}))})),Y.getNodeList("array").forEach((function(e){e.addEventListener("keyup",(function(){K.toggleAddToMapButtons("array")}))}));const K=function(){let e=document.querySelector("#button-add-to-map"),t=document.querySelector("#button-clear-fields"),o=document.querySelector("#button-settings"),n=document.querySelector("#button-settings-reset"),a=document.querySelector("#button-objects-copy-all"),r=document.querySelector("#button-objects-zoom-all"),l=document.querySelector("#button-objects-delete-all");return{applyClickEvents:function(){e.addEventListener("click",(function(){let e,t,o=I(),n=Y.getValues(o);"point"===o?e=Ae.add({type:"point",coords:[{lat:n.lat,lon:n.lon}]}):"circle"===o?e=Ae.add({type:"circle",coords:[{lat:n.lat,lon:n.lon}],radius:n.rad}):"line"===o?e=Ae.add({type:"polyline",coords:[{lat:n.latOne,lon:n.lonOne},{lat:n.latTwo,lon:n.lonTwo}]}):"geojson"===o?e=Ae.add({type:"geojson",geoJson:n.geoJson}):"array"===o&&(t=Ae.addArray(n.arrayList)),"array"!==o?m.onAddObject.flyTo&&Ae.locateByObjectID(e):(t.payload.points+t.payload.circles+t.payload.polylines+t.payload.polygones+t.payload.rectangles+t.payload.SVGs+t.payload.GeoJSON+t.payload.cursorOnRoute>0&&m.onAddObject.flyTo&&Ae.showAll(),A(t),M.close(),M.open())})),t.addEventListener("click",(function(){let e=I();Y.clearValues(e),K.toggleAddToMapButtons(e)})),o.addEventListener("click",(function(){J.open()})),n.addEventListener("click",(function(){g.resetToDefault(),m.resetToDefault(),localStorage.clear(),A({type:"fullReset",text:"<b>LocalStorage</b> is cleared and <b>Settings</b> was restored to their defaults!"}),M.close(),M.open(),b()})),a.addEventListener("click",(function(){Ae.copyAllToClipboard()})),r.addEventListener("click",(function(){Ae.showAll()})),l.addEventListener("click",(function(){Ae.deleteAll()}))},updateObjectsManagementButtons:function(){let e=document.querySelectorAll(".button-object-info"),t=document.querySelectorAll(".button-object-copy"),o=document.querySelectorAll(".button-object-locate"),n=document.querySelectorAll(".button-object-delete");e.forEach((function(e){e.addEventListener("click",(function(){let e=function(e){let t={title:'<i class="mdi mdi-information mdi-18px"></i> Object info',content:""};t.content+='<table class="b-obj-info-table"><tbody><tr>',t.content+=`<tr><td>ID</td><td><b class="b-obj-info-bold-mono">${e.id}</b></td></tr>`,t.content+=`<tr><td>Type</td><td><b class="b-obj-info-bold-mono">${e.type}</b></td></tr>`,t.content+=`<td>JSON</td><td><pre class="b-obj-info-pre">${JSON.stringify(e.object,void 0,2)}</pre></td></tr>`;let o=e.object.coords,n="";o&&o.forEach(((e,t)=>{n+=`${t+1}: <b class="b-obj-info-bold-mono">${e.lat} ${e.lon}</b><br>`})),t.content+=`<tr><td>Coordinates</td><td><pre class="b-obj-info-pre">${n}</td></pre></td></tr>`;let a={point:!1,circle:"radius",polyline:"distance",polygon:"area",rectangle:"area"},r="";for(const[t,o]of Object.entries(e.measurements))r+=`${F(o)} ${t.replace("2","<sup>2</sup>")}<br>`;return t.content+=`<tr><td>Measurements${a[e.type]?'<br><span class="b-obj-info-regular-sans">('+a[e.type]+")</span>":""}</td><td>${""!==r?r:"—"}</td></tr>`,e.azimuth&&(t.content+=`<tr><td>Azimuth</td><td>${e.azimuth}°</td></tr>`),t.content+=`<tr><td>Color</td><td><span class="b-obj-info-dot"  style="background-color:${e.color}"></span>${e.color}</td></tr>`,t.content+=`<tr><td>Line weight</td><td>${e.weight?e.weight+"px":"—"}</td></tr>`,t.content+=`<tr><td>Show marker dot</td><td>${e.show_marker_dot}</td></tr>`,t.content+=`<tr><td>Show marker pin</td><td>${e.show_marker_pin}</td></tr>`,t.content+="</tbody></table>",t}(Ae.getFullInfo(this));var t,o;t=e.title,o=e.content,q.innerHTML=t,z.innerHTML=o,D.open()}))})),t.forEach((function(e){e.addEventListener("click",(function(){Ae.copyToClipboardByNode(this)}))})),o.forEach((function(e){e.addEventListener("click",(function(){Ae.locateByNode(this)}))})),n.forEach((function(e){e.addEventListener("click",(function(){Ae.delete(this),K.toggleObjectListButton()}))}))},toggleAddToMapButtons:function(o){let n=Y.validateValues(o);e.disabled=n.indexOf(0)>-1,t.disabled=n.indexOf(1)<=-1},toggleObjectListButton:function(){let e=document.querySelector("#objects-list");Me.length>0?(a.disabled=!1,r.disabled=!1,l.disabled=!1,e.style.visibility="visible"):(a.disabled=!0,r.disabled=!0,l.disabled=!0,e.style.visibility="hidden")}}}();document.querySelectorAll(".mdc-tab").forEach((function(e){e.addEventListener("click",(function(){let e=this.getAttribute("data-tab-name");K.toggleAddToMapButtons(e),le=[],ie.clearLayers(),te&&(te.remove(),te=void 0),oe&&(oe.remove(),oe=void 0),Q&&(Q.remove(),Q=void 0),ee&&(ee.remove(),ee=void 0)}))}));const X=L.Control.extend({onAdd:e=>{const t=L.DomUtil.create("div");return t.innerHTML='<div class="mouse-cursor-helper"><p id="mouse-coordinates">0, 0</p><p id="temp-object-summary"></p><p id="zoom-level"></p>',t}});d.addControl(new X({position:"topright"}));let Q,ee,te,oe,ne=document.querySelector("#mouse-coordinates"),ae=document.querySelector("#temp-object-summary"),re=document.querySelector("#zoom-level"),le=[],ie=(new L.featureGroup).addTo(d),se=L.divIcon({className:"marker-icon-pin",html:"<div class='marker-pin marker-point-temp-color'></div><b>+</b>",iconSize:[30,42],iconAnchor:[15,42]}),ce=L.divIcon({className:"marker-icon-dot marker-point-temp-color",iconSize:[4,4],iconAnchor:[3,3]}),de=!1;function pe(e){de=e.shiftKey,de?L.DomUtil.addClass(d._container,"crosshair-cursor-enabled"):L.DomUtil.removeClass(d._container,"crosshair-cursor-enabled")}window.addEventListener("keydown",pe,!1),window.addEventListener("keypress",pe,!1),window.addEventListener("keyup",pe,!1);const ue=e=>{let t=le[0].lat===e[0]&&le[0].lon===e[1]&&le.length>2?"polygon":"polyline";Ae.add({type:t,coords:le}),ie.clearLayers(),le=[],Q.remove(),ee.remove(),oe.remove(),oe=void 0};d.on("click",(function(e){if(de&&"array"!==P){let t=I();if(le.push({lat:parseFloat(e.latlng.lat).toFixed(6),lon:parseFloat(e.latlng.lng).toFixed(6)}),"point"===t&&de&&(Ae.add({type:"point",coords:le}),le=[]),"circle"===t&&de&&(1===le.length?(te=L.circle([le[0].lat,le[0].lon],{radius:0,weight:2,color:"#ff3",opacity:.8,fillOpacity:.1}).addTo(d),ie.addLayer(L.marker([le[0].lat,le[0].lon],{icon:se})),ie.addLayer(L.marker([le[0].lat,le[0].lon],{icon:ce}))):le.length>=2&&(Ae.add({type:"circle",radius:parseFloat(L.latLng([le[0].lat,le[0].lon]).distanceTo([le[1].lat,le[1].lon])).toFixed(0),coords:le.splice(0,1)}),ie.clearLayers(),le=[],te.remove())),"line"===t&&de){let e=le.length-1;oe?oe.setLatLngs(le):oe=L.polyline(le,{color:"#ff3",weight:2,opacity:.6}).addTo(d),ie.addLayer(L.marker([le[e].lat,le[e].lon],{icon:se}).on("click",(()=>{ue([le[e].lat,le[e].lon])}))),ie.addLayer(L.marker([le[e].lat,le[e].lon],{icon:ce}).on("click",(t=>{ue([le[e].lat,le[e].lon])}))),Q?Q.setLatLng([le[e].lat,le[e].lon]):Q=L.marker([le[e].lat,le[e].lon],{icon:se}).addTo(d),ee?ee.setLatLng([le[e].lat,le[e].lon]):ee=L.marker([le[e].lat,le[e].lon],{icon:ce}).addTo(d)}}})),d.on("mousemove",(e=>{let t=parseFloat(e.latlng.lat).toFixed(6),o=parseFloat(e.latlng.lng).toFixed(6);if(!le[0]&&de&&oe&&"array"!==P&&(Q.setLatLng([t,o]),ee.setLatLng([t,o])),le[0]){let e=L.latLng([le[0].lat,le[0].lon]).distanceTo([t,o]).toFixed(0);ne.innerHTML=`<span class="mdi mdi-map-marker mdi-12px"></span> ${le[0].lat}, ${le[0].lon}`,ae.innerHTML=`<span class="mdi mdi-crosshairs mdi-12px"></span> ${t}, ${o}`,ae.innerHTML+=`<br>${F(e)} m`,te&&te.setRadius(e),oe&&(Q.setLatLng([t,o]),ee.setLatLng([t,o]),oe.setLatLngs(le.concat({lat:t,lon:o})))}else ne.innerHTML=`<span class="mdi mdi-crosshairs mdi-12px"></span> ${t}, ${o}`,ae.innerHTML=""})),d.on("zoomend",(function(e){re.innerHTML="Zoom: "+e.target._zoom}));const me=L.Control.extend({onAdd:e=>{const t=L.DomUtil.create("div");return L.DomEvent.disableClickPropagation(t),t.innerHTML='<div class="ruler-control"><div class="ruler-control-polyline mdi mdi-ruler mdi-18px" title="Ruler"></div></div>',t}});d.addControl(new me({position:"topleft"})),d.createPane("rulerLinesPane"),d.getPane("rulerLinesPane").style.zIndex=650,d.createPane("rulerMarkersPane"),d.getPane("rulerMarkersPane").style.zIndex=651;const ge=document.querySelector(".ruler-control-polyline");let ye=!1,fe=(new L.featureGroup).addTo(d),he=[],be=null;const Le=()=>{fe.addLayer(L.polyline([],{className:"ruler-polyline-path-bg",pane:"rulerLinesPane"}).addTo(d)),fe.addLayer(L.polyline([],{className:"ruler-polyline-path",pane:"rulerLinesPane"}).addTo(d))};function ve(){fe.eachLayer((function(e){e instanceof L.Marker&&e.closePopup()}))}function ke(){Se()}function we(){Se(),Oe(be._leaflet_id)}Le(),ge.addEventListener("click",(function(){!1===ye?(ge.classList.add("ruler-control__active"),L.DomUtil.addClass(d._container,"crosshair-cursor-enabled"),ye=!0,Ae.disableAllPopups()):(ge.classList.remove("ruler-control__active"),L.DomUtil.removeClass(d._container,"crosshair-cursor-enabled"),ye=!1,fe.clearLayers(),Le(),he=[],Ae.enableAllPopups())}));const Se=(e,t)=>{if(e&&t){let o=L.divIcon({className:"marker-icon-pin",html:"<div class='ruler-marker-pin'></div>",iconSize:[15,15],iconAnchor:[0,0]}),n=L.marker([e,t],{icon:o,draggable:!0,pane:"rulerMarkersPane"}).on("dragstart",ve).on("drag",ke).on("dragend",we).on("popupopen",(e=>{Oe(e.popup._source._leaflet_id)})).addTo(d);fe.addLayer(n)}he=(e=>{let t=[];return e.eachLayer((function(e){e instanceof L.Marker&&t.push(e.getLatLng())})),[t]})(fe),fe.eachLayer((function(e){e instanceof L.Polyline&&e.setLatLngs(he)})),je()},je=()=>{let e=0,t=null;fe.eachLayer((function(o){if(o instanceof L.Marker){let n=o.getLatLng();t&&(e+=t.distanceTo(n)),t=n;let a=function(e,t){let o=H(e),n={};return n=o.m<1e4?{value:o.m,unit:"m"}:{value:o.km,unit:"km"},`<strong>${F(n.value)} ${n.unit}</strong><span id="ruler-id-${t}" class="mdi mdi-icon-button mdi-delete-forever mdi-12px"></span>`}(e,o._leaflet_id),r=o.getPopup();r?r.setContent(a):o.bindPopup(a,{className:"ruler-marker-pin-popup",offset:[0,-12],minWidth:20,closeButton:!1,autoClose:!1}).addTo(d),be=o}})),be&&be.openPopup()},Oe=e=>{let t=document.querySelector("#ruler-id-"+e);t&&t.addEventListener("click",(function(){fe.removeLayer(e),Se()}))};d.on("click",(function(e){ye&&!de&&Se(e.latlng.lat,e.latlng.lng)}));let Te=0,Me=[],xe=document.querySelector("#objects-list > tbody");const Ae={add:function(e){try{Te++;let t,o=e.type,n=e.coords,a=e.flipCoords,r=e.stepDistance,l=e.stepInterval,i=e.followCursor,s=e.traversedColor||"unset",c=e.whiteBorder,p=[],u=e.radius?e.radius:null,y="",f=e.color||g.color[o],h=e.weight>=0?e.weight:g.lineWeight[o],b=e.fill,v="boolean"==typeof e.showMarkerPin?e.showMarkerPin:g.markerPin[o],k="boolean"==typeof e.showMarkerDot?e.showMarkerDot:g.markerDot[o],M="boolean"==typeof e.dashedLine?e.dashedLine:g.lineDashed[o];M=M?`${h}, ${2.5*h}`:null;let x=e.azimuth,A={pin:L.divIcon({className:"b-marker-icon",html:`<div class='b-marker-icon-pin' style='background-color:${f}'></div><b class='b-marker-icon-pin__content'>${Te}</b>`,iconSize:[30,42],iconAnchor:[15,42]}),dot:L.divIcon({className:"b-marker-icon",html:`<div class='b-marker-icon-dot' style='background-color:${f}'></div>`,iconSize:[4,4],iconAnchor:[5,5]}),arrow:L.divIcon({className:"b-marker-icon",html:j(f,x),iconSize:[24,24],iconAnchor:[12,12]}),svgDot:L.divIcon({className:"b-marker-icon",html:O(f,"simple"),iconSize:[12,12],iconAnchor:[7,7]})},N=e.svgDataURI?e.svgDataURI:null;if("point"===o){let e=n[0].lat,t=n[0].lon;p.push(L.marker([e,t],{id:Te,points:[1,1],latLon:[e,t],icon:x>=0&&x<=360?A.arrow:A.dot}).bindPopup(T(Te,"Point",1,1,e,t))),v&&p.push(L.marker([e,t],{id:Te,points:[1,1],latLon:[e,t],icon:A.pin}).bindPopup(T(Te,"Point",1,1,e,t))),m.onAddObject.reverseGeocode&&w(e,t)}if("circle"===o){y=H(u);let e=n[0].lat,t=n[0].lon;p.push(L.circle([e,t],{radius:u,color:f,weight:h,dashArray:M})),k&&p.push(L.marker([e,t],{id:Te,points:[1,1],latLon:[e,t],radius:u,icon:x>=0&&x<=360?A.arrow:A.dot}).bindPopup(T(Te,"Circle",1,1,e,t,y))),v&&p.push(L.marker([e,t],{id:Te,points:[1,1],latLon:[e,t],radius:u,icon:A.pin}).bindPopup(T(Te,"Circle",1,1,e,t,y))),m.onAddObject.reverseGeocode&&w(e,t)}if("polyline"===o){let e=n.length,t=[];n.forEach(((o,n)=>{let a=o.lat,r=o.lon;t.push([a,r]),k&&p.push(L.marker([a,r],{id:Te,points:[n+1,e],latLon:[a,r],icon:A.dot}).bindPopup(T(Te,"Polyline",n+1,e,a,r))),v&&p.push(L.marker([a,r],{id:Te,points:[n+1,e],latLon:[a,r],icon:A.pin}).bindPopup(T(Te,"Polyline",n+1,e,a,r))),m.onAddObject.reverseGeocode&&w(a,r)})),y=((e,t)=>{let o={m:0,km:0},n=null;return e.forEach(((e,t)=>{let a=e[0],r=e[1];n&&(o.m+=L.latLng(n).distanceTo([a,r])),n=[a,r]})),o.km=Math.round(o.m/1e3*100)/100,o.m=Math.round(100*o.m)/100,t in o?o[t]:o})(t),p.push(L.polyline(t,{color:f,weight:h,dashArray:M}))}if("polygon"===o){let e=n.length,t=[];n.forEach(((o,n)=>{let a=o.lat,r=o.lon;t.push([a,r]),k&&p.push(L.marker([a,r],{id:Te,points:[n+1,e],latLon:[a,r],icon:A.dot}).bindPopup(T(Te,"Polygon",n+1,e,a,r))),v&&p.push(L.marker([a,r],{id:Te,points:[n+1,e],latLon:[a,r],icon:A.pin}).bindPopup(T(Te,"Polygon",n+1,e,a,r))),m.onAddObject.reverseGeocode&&w(a,r)})),y=R(t),p.push(L.polygon(t,{color:f,weight:h,dashArray:M}))}if("rectangle"===o){let e=[[n[0].lat,n[0].lon],[n[1].lat,n[1].lon]];e.forEach(((e,t)=>{let o=e[0],n=e[1];k&&p.push(L.marker([o,n],{id:Te,points:[t+1,2],latLon:[o,n],icon:A.dot}).bindPopup(T(Te,"Rectangle",t+1,2,o,n))),v&&p.push(L.marker([o,n],{id:Te,points:[t+1,2],latLon:[o,n],icon:A.pin}).bindPopup(T(Te,"Rectangle",t+1,2,o,n))),m.onAddObject.reverseGeocode&&w(o,n)})),y=R([[n[0].lat,n[0].lon],[n[0].lat,n[1].lon],[n[1].lat,n[1].lon],[n[1].lat,n[0].lon]]),p.push(L.rectangle(e,{color:f,weight:h,dashArray:M}))}if("svgString"===o&&N){let e=[[n[0].lat,n[0].lon],[n[1].lat,n[1].lon]];const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("xmlns","http://www.w3.org/2000/svg");let o=atob(N.replace(/data:image\/svg\+xml;base64,/,"")).replace(/(\n+)/gm,"").replace(/stroke=\"(.*?)\"/g,`stroke="${f}" vector-effect="non-scaling-stroke"`).replace(/stroke\-width=\"(.*?)\"/g,`stroke-width="${h}"`).replace(/\ width=\"(.*?)\"/,' width="100%"').replace(/\ height=\"(.*?)\"/,' height="100%"');b&&(o=o.replace(/fill=\"(.*?)\"/g,`fill="${b}"`)),t.innerHTML=o,p.push(L.svgOverlay(t,e))}if("geojson"===o&&p.push(L.geoJSON(JSON.parse(e.geoJson),{color:f,weight:h,onEachFeature:function(e,t){let o=e.properties?.color||f;t.setStyle({fillColor:o,color:o,weight:e.properties?.weight||h})},pointToLayer:function(e,t){let o=[];return o.push(L.marker(t,{icon:L.divIcon({className:"b-marker-icon",html:O(e.properties?.color||f,e.properties?.type||"simple"),iconSize:"simple"===e.properties?.type?[12,12]:[16,16],iconAnchor:"simple"===e.properties?.type?[7,7]:[9,9]})}).bindPopup(function(e,t=[]){let o="";if(e)for(const[n,a]of Object.entries(e))(t.indexOf(n)>-1||0===t.length)&&(o+=`<div class="popup-row" style="justify-content: space-between"><div class="popup-col-1" style="min-width: unset">${n}</div><div class="popup-col-2">${a}</div></div>`);return o}(e.properties))),v&&o.push(L.marker(t,{icon:A.pin})),L.featureGroup(o)}})),"cursorOnRoute"===o){let e,t,o=(e,t)=>turf.bearingToAzimuth(turf.bearing(turf.point(e),turf.point(t)));if(a?(e=L.GeoJSON.coordsToLatLngs(n),t=n):(e=n,t=JSON.parse(JSON.stringify(n)).map((e=>[e[1],e[0]]))),c){let t=L.polyline(e,{weight:h+2,color:"#fff",opacity:1}).addTo(d);p.push(t)}let u=L.polyline(e,{weight:h,color:s,opacity:1}).addTo(d);p.push(u);let m=L.polyline(e,{weight:h,color:f,opacity:1}).addTo(d);p.push(m);let g=L.marker(e[0],{zIndexOffset:2e3,icon:L.divIcon({className:"b-marker-icon",html:j(f,o(t[0],t[1])),iconSize:[24,24],iconAnchor:[12,12]})}).addTo(d);p.push(g);let y=e.length,b=turf.length(turf.lineString(t),{units:"kilometers"}),v=e=>{let n=turf.along(turf.lineString(t),e,{units:"kilometers"}),a=turf.lineSplit(turf.lineString(t),turf.point(n.geometry.coordinates));1 in a.features?(n.properties.azimuth=o(a.features[1].geometry.coordinates[0],a.features[1].geometry.coordinates[1]),m.setLatLngs(L.GeoJSON.coordsToLatLngs(a.features[1].geometry.coordinates))):(n.properties.azimuth=o(t[y-2],t[y-1]),n.geometry.coordinates[0]===t[y-1][0]&&n.geometry.coordinates[1]===t[y-1][1]&&d.removeLayer(m)),g.setLatLng([n.geometry.coordinates[1],n.geometry.coordinates[0]]),g.setIcon(L.divIcon({className:"b-marker-icon",html:j(f,n.properties.azimuth),iconSize:[24,24],iconAnchor:[12,12]})),i&&d.setView([n.geometry.coordinates[1],n.geometry.coordinates[0]],d.getZoom())},k=0,w=setInterval((()=>{v(k*r),k*r>b&&(clearInterval(w),w=null),k+=1}),1e3*l)}t=new L.featureGroup(p).addTo(d);let E={id:Te,type:o,object:e,leaflet_object:t,measurements:y,color:f,weight:h,dashedLine:M,show_marker_dot:k,show_marker_pin:v,azimuth:x};return Me.push(E),xe.innerHTML+=function(e){let t="",o="—";return e.azimuth&&(o=e.azimuth+"°"),"polyline"!==e.type&&"circle"!==e.type||(t=e.measurements.m>1e4?`${F(e.measurements.km)} km`:`${F(e.measurements.m)} m`),"polygon"!==e.type&&"rectangle"!==e.type||(t=e.measurements.m2>1e4?`${F(e.measurements.km2)} km<sup>2</sup>`:`${F(e.measurements.m2)} m<sup>2</sup>`),"—"!==o?o+=", "+t:o=t,`<tr><td>${e.id}</td><td>${e.type}</td><td>${o}</td><td><button class="mdc-button button-object-info" title="Full info"><span class="mdc-button__ripple"></span><span class="mdi mdi-icon-button mdi-information-outline mdi-18px"></span></button><button class="mdc-button button-object-copy" title="Copy JSON to clipboard"><span class="mdc-button__ripple"></span><span class="mdi mdi-icon-button mdi-content-copy mdi-18px"></span></button><button class="mdc-button button-object-locate" title="Locate on the map"><span class="mdc-button__ripple"></span><span class="mdi mdi-icon-button mdi-crosshairs-gps mdi-18px"></span></button><button class="mdc-button button-object-delete"  title="Delete object"><span class="mdc-button__ripple"></span><span class="mdi mdi-icon-button mdi-delete-forever mdi-18px"></span></button></td></tr>`}(E),K.updateObjectsManagementButtons(),K.toggleObjectListButton(),m.onAddObject.reverseGeocode&&S(Te,Me),ye&&Ae.disableAllPopups(),Te}catch(e){return Te--,-1}},addArray:function(e){let t={type:"addArray",payload:{points:0,circles:0,polylines:0,polygones:0,rectangles:0,SVGs:0,GeoJSON:0,cursorOnRoute:0,skipped:0}};return JSON.parse(e).forEach(((e,o)=>{let n=e;if("group"===e.type&&["drawCircleBounds","drawRectangleBounds"].indexOf(e.function)>-1){let t=null,o=Ae.getBoundsByObjectIDs(e.objectIDs);-1!==o&&("drawCircleBounds"===e.function&&(t={type:"circle",radius:o.radius,coords:[{lat:o.center.lat,lon:o.center.lng}]}),"drawRectangleBounds"===e.function&&(t={type:"rectangle",coords:[{lat:o.southEast.lat,lon:o.southEast.lng},{lat:o.northWest.lat,lon:o.northWest.lng}]}),null!==t&&(e.color&&(t.color=e.color),e.weight>=0&&(t.weight=e.weight),!0===e.showMarkerDot?t.showMarkerDot=!0:!1===e.showMarkerDot&&(t.showMarkerDot=!1),!0===e.showMarkerPin?t.showMarkerPin=!0:!1===e.showMarkerPin&&(t.showMarkerPin=!1),n=t))}n.type&&["point","circle","polyline","polygon","rectangle","svgString","geojson","cursorOnRoute"].indexOf(n.type)>-1&&(n.coords||n.geoJson||n.route)&&Ae.add(n)>0?(n.coords&&("point"===n.type?t.payload.points+=1:"circle"===n.type?t.payload.circles+=1:"polyline"===n.type?t.payload.polylines+=1:"polygon"===n.type?t.payload.polygones+=1:"rectangle"===n.type?t.payload.rectangles+=1:"svgString"===n.type?t.payload.SVGs+=1:"geojson"===n.type?t.payload.GeoJSON+=1:"cursorOnRoute"===n.type&&(t.payload.cursorOnRoute+=1)),n.geoJson&&"geojson"===n.type&&(t.payload.GeoJSON+=1)):t.payload.skipped+=1})),t},delete:function(e){let t=e.parentNode.parentNode,o=parseInt(t.firstChild.textContent),n=Me.findIndex((e=>e.id===o));Me[n].leaflet_object.clearLayers(),Me.splice(n,1),t.remove()},copyAllToClipboard:function(){let e=[];Me.forEach((function(t){e.push(t.object)})),G(JSON.stringify(e),"all objects")},copyToClipboardByNode:function(e){let t=e.parentNode.parentNode,o=parseInt(t.firstChild.textContent),n=Me.findIndex((e=>e.id===o));G("["+JSON.stringify(Me[n].object)+"]",Me[n].type)},locateByNode:function(e){let t=e.parentNode.parentNode,o=parseInt(t.firstChild.textContent),n=Me.findIndex((e=>e.id===o));d.flyToBounds(Me[n].leaflet_object.getBounds(),{padding:L.point(100,100)})},locateByObjectID:function(e){let t=Me.findIndex((t=>t.id===e));"point"===Me[t].type?d.flyToBounds(Me[t].leaflet_object.getBounds(),{maxZoom:12}):d.flyToBounds(Me[t].leaflet_object.getBounds(),{padding:L.point(100,100)})},getBoundsByObjectIDs:function(e){try{let t=[];e.forEach((function(e){let o=Me.findIndex((t=>t.id===e));-1!==o&&t.push(Me[o].leaflet_object)}));let o=new L.featureGroup(t),n=o.getBounds().getCenter(),a=o.getBounds().getNorthWest(),r=o.getBounds().getSouthEast(),l=o.getBounds().getNorthEast(),i=o.getBounds().getSouthWest(),s=L.latLng(l).distanceTo(a),c=L.latLng(r).distanceTo(i),d=L.latLng(l).distanceTo(r),p=L.latLng(a).distanceTo(i);return{center:n,radius:Math.max(s,c,d,p)/Math.sqrt(3),northWest:a,southEast:r}}catch(e){return console.log(e),-1}},deleteAll:function(){Me.forEach((function(e){e.leaflet_object.clearLayers()})),Me=[],xe.innerHTML="",K.toggleObjectListButton()},showAll:function(){let e=[];if(Me.forEach((function(t){e.push(t.leaflet_object)})),e.length){let t=new L.featureGroup(e);d.flyToBounds(t.getBounds(),{padding:L.point(30,30)})}},disableAllPopups:function(){Me.forEach((function(e){e.leaflet_object.eachLayer((function(e){e instanceof L.Marker&&e.off("click")}))}))},enableAllPopups:function(){Me.forEach((function(e){e.leaflet_object.eachLayer((function(e){e instanceof L.Marker&&e.on("click",(function(){e.getPopup()&&e.openPopup()}))}))}))},getFullInfo:function(e){let t=e.parentNode.parentNode,o=parseInt(t.firstChild.textContent),n=Me.findIndex((e=>e.id===o));return Me[n]}},Ne=L.Control.extend({onAdd:e=>{const t=L.DomUtil.create("div");return L.DomEvent.disableClickPropagation(t),t.innerHTML='<div class="user-location-control"><span class="mdi mdi-near-me mdi-18px" title="My location"></span></div>',t}});d.addControl(new Ne({position:"topleft"}));const Ee=document.querySelector(".user-location-control"),$e=Ee.getElementsByTagName("SPAN")[0];Ee.addEventListener("click",(function(){Pe()}));const Pe=()=>{$e.classList.remove("mdi-near-me"),$e.classList.add("mdi-loading","mdi-spin");let e=[];navigator.geolocation.getCurrentPosition((function(t){e=[t.coords.latitude,t.coords.longitude,t.coords.accuracy],d.setView([e[0],e[1]],10);let o=Ae.add({type:"circle",coords:[{lat:e[0],lon:e[1]}],radius:e[2]});Ae.locateByObjectID(o),$e.classList.remove("mdi-loading","mdi-spin"),$e.classList.add("mdi-near-me")}),(function(e){console.warn(`ERROR(${e.code}): ${e.message}`),$e.classList.remove("mdi-loading","mdi-spin"),$e.classList.add("mdi-near-me"),_.open()}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})};document.addEventListener("DOMContentLoaded",(function(){K.applyClickEvents(),K.toggleAddToMapButtons(I()),K.toggleObjectListButton(),(()=>{let e=new URLSearchParams(location.search),t=e.get("tab"),o=e.get("addArray");if("point"===t)N.activateTab(0),P="point";else if("circle"===t)N.activateTab(1),P="circle";else if("line"===t)N.activateTab(2),P="line";else if("geojson"===t)N.activateTab(3),P="geojson";else if("array"===t){if(N.activateTab(4),P="array",o&&Z(o)){let e=Ae.addArray(o);e.payload.points+e.payload.circles+e.payload.polylines+e.payload.polygones>0&&Ae.showAll(),A(e),M.close(),M.open()}}else history.pushState({},null,location.href.split("?")[0])})(),function(){let e=JSON.parse(localStorage.getItem("onAddObjectSettings")),t=JSON.parse(localStorage.getItem("markerPinSettings")),o=JSON.parse(localStorage.getItem("markerDotSettings")),n=JSON.parse(localStorage.getItem("colorSettings")),a=JSON.parse(localStorage.getItem("lineWeightSettings")),r=JSON.parse(localStorage.getItem("lineDashedSettings"));e&&(m.onAddObject=e),t&&(g.markerPin=t),o&&(g.markerDot=o),n&&(g.color=n),a&&(g.lineWeight=a),r&&(g.lineDashed=r)}(),b()}))})();